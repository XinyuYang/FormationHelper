/*
react-json-fork v0.0.1
https://github.com/arqex/react-json
MIT: https://github.com/arqex/react-json/raw/master/LICENSE
*/
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require(void 0)):"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Json=e(require(void 0)):t.Json=e(t.React)}(this,function(t){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i,r=n(1),s=n(2),o=n(8),a=n(9),u=n(11),p=n(16),d=n(17),c=n(19),l=n(20),f=n(21),h=n(22),g=n(23),v=n(10),y="undefined"!=typeof document||"";y&&(i=document.documentElement.style,("flexWrap"in i||"webkitFlexWrap"in i||"msFlexWrap"in i)&&(y=" jsonFlex"));var m=r.createClass({getDefaultProps:function(){return{value:{},binding:{},errors:!1,updating:!1}},childContextTypes:{typeDefaults:r.PropTypes.object},getChildContext:function(){return{typeDefaults:this.state.defaults}},getInitialState:function(){var t=this,e=this.props.value,n=this.props.binding;return e.getListener||(e=new s(e).get()),e.getListener().on("update",function(e){return t.state.updating?t.setState({updating:!1}):void(t.state.value!==e&&(t.setState({value:e}),t.state.errors&&t.getValidationErrors(),t.props.onChange&&t.props.onChange(e.toJS())))}),n.getListener||(n=new s(n).get()),n.getListener().on("update",function(e){t.state.binding!==e&&(t.setState({binding:e}),t.props.onBindingChange&&t.props.onBindingChange(e.toJS()))}),{value:e,binding:n,defaults:this.createDefaults(),id:this.getId()}},componentWillReceiveProps:function(t){t.value.getListener&&t.binding.getListener||this.setState({updating:!0,value:this.state.value.reset(t.value),binding:this.state.binding.reset(t.binding)}),this.setState({defaults:this.createDefaults()})},render:function(){var t=this.props.settings||{},e=r.createElement(a,{type:"object",value:this.state.value,binding:this.state.binding,settings:o({},this.state.defaults.object,{fields:t.fields,useBinding:t.useBinding,editing:this.getFormSetting(t,"editing","always"),fixedFields:this.getFormSetting(t,"fixedFields",!0),adder:this.getFormSetting(t,"adder",!1),hiddenFields:t.hiddenFields,header:!1,order:t.order}),ref:"value",defaults:this.state.defaults,id:this.state.id}),n="jsonEditor"+y;return r.DOM.div({className:n},e)},getValue:function(){return this.state.value.toJS()},getBinding:function(){return this.state.binding.toJS()},getValidationErrors:function(){var t=this.getValue(),e=this.refs.value.getValidationErrors(t);return this.setState({errors:e.length}),e.length?e:!1},getDeepSettings:function(){var t={};for(var e in v)t[e]=v[e](this,t[e]);return t},createDefaults:function(){var t=this.props.settings||{},e=a.prototype.components,n=t.defaults||{},i={};for(var r in e)i[r]=o({},e[r].prototype.defaults||{},n[r]||{});return i},getId:function(){return btoa(parseInt(1e4*Math.random())).replace(/=/g,"")},getFormSetting:function(t,e,n){return"undefined"!=typeof t[e]?t[e]:t.form?n:void 0}});m.registerType=a.registerType.bind(a),m.registerType("object",u),m.registerType("array",p,!0),m.registerType("string",d,!0),m.registerType("text",f,!0),m.registerType("number",l,!0),m.registerType("boolean",c,!0),m.registerType("password",h),m.registerType("select",g),t.exports=m},function(e,n){e.exports=t},function(t,e,n){var i=n(3);t.exports=i},function(t,e,n){"use strict";var i=n(4),r=n(5),s=(n(6),n(7)),o=function(t,e){var n,r=this,o=e&&e.mutable||!1,a=e&&e.live||a,u=[],p=0,d=function(t){var e,n=t.__;for(n.listener&&(s.trigger(t,"update",0,!0),n.parents.length||n.listener.trigger("immediate","now")),e=0;e<n.parents.length;e++)l("now",n.parents[e])},c=function(t){u.push(t),p||(p=1,i.nextTick(function(){u=[],p=0}))},l=function(t,e,n){var r;e.__;if("listener"==t)return s.createListener(e);if("now"==t){if(u.length)for(;u.length;)r=u.shift(),d(r);else d(e);return e}var o=s.update(t,e,n);if("pivot"!=t){var a=i.findPivot(o);if(a)return c(o),a}return o},f=function(){};o||(f=function(t){Object.freeze(t)}),n=s.freeze(t,l,f,a);var h=n.getListener(),g=!1;h.on("immediate",function(t,e){if("now"==t){if(!g)return;return g=!1,r.trigger("update",n)}if(t==n)return n=e,a?r.trigger("update",e):void(g||(g=!0,i.nextTick(function(){g&&(g=!1,r.trigger("update",n))})))}),i.addNE(this,{get:function(){return n},set:function(t){var e=l("reset",n,t);e.__.listener.trigger("immediate",n,e)}}),i.addNE(this,{getData:this.get,setData:this.set}),this._events=[]};o.prototype=i.createNonEnumerable({constructor:o},r),t.exports=o},function(t,e){"use strict";var n=new Function("return this")(),i={extend:function(t,e){for(var n in e)t[n]=e[n];return t},createNonEnumerable:function(t,e){var n={};for(var i in t)n[i]={value:t[i]};return Object.create(e||{},n)},error:function(t){var e=new Error(t);if(console)return console.error(e);throw e},each:function(t,e){var n,i,r;if(t&&t.constructor==Array)for(n=0,i=t.length;i>n;n++)e(t[n],n);else for(r=Object.keys(t),n=0,i=r.length;i>n;n++)e(t[r[n]],r[n])},addNE:function(t,e){for(var n in e)Object.defineProperty(t,n,{enumerable:!1,configurable:!0,writable:!0,value:e[n]})},nextTick:function(){function t(){for(;i=r.shift();)i();s=!1}function e(t){r.push(t),s||(s=!0,u())}var i,r=[],s=!1,o=!!n.postMessage,a="nexttick",u=function(){return o?function(){n.postMessage(a,"*")}:function(){setTimeout(function(){p()},0)}}(),p=function(){return o?function(e){e.source===n&&e.data===a&&(e.stopPropagation(),t())}:t}();return o&&n.addEventListener("message",p,!0),e.removeListener=function(){n.removeEventListener("message",p,!0)},e}(),findPivot:function(t){if(t&&t.__){if(t.__.pivot)return t;for(var e,n=0,i=t.__.parents,r=0;!n&&r<i.length;)e=i[r],e.__.pivot&&(n=e),r++;if(n)return n;for(r=0;!n&&r<i.length;)n=this.findPivot(i[r]),r++;return n}}};t.exports=i},function(t,e,n){"use strict";var i=n(4),r={on:function(t,e,n){var i=this._events[t]||[];return i.push({callback:e,once:n}),this._events[t]=i,this},once:function(t,e){this.on(t,e,!0)},off:function(t,e){if("undefined"==typeof t)this._events={};else if("undefined"==typeof e)this._events[t]=[];else{var n,i=this._events[t]||[];for(n=i.length-1;n>=0;n--)i[n].callback===e&&i.splice(n,1)}return this},trigger:function(t){var e,n,i=[].slice.call(arguments,1),r=this._events[t]||[],s=[];for(e=0;e<r.length;e++)n=r[e],n.callback?n.callback.apply(null,i):n.once=!0,n.once&&s.push(e);for(e=s.length-1;e>=0;e--)r.splice(s[e],1);return this}},s=i.createNonEnumerable(r);t.exports=s},function(t,e,n){"use strict";var i=n(4),r=function(t){var e={};for(var n in t)e[n]={writable:!0,configurable:!0,enumerable:!1,value:t[n]};return e},s={set:function(t,e){var n=t,i=this.__.trans;if("string"==typeof t&&(n={},n[t]=e),!i){for(var r in n)i=i||this[r]!=n[r];if(!i)return this}return this.__.notify("merge",this,n)},reset:function(t){return this.__.notify("replace",this,t)},getListener:function(){return this.__.notify("listener",this)},toJS:function(){var t;return t=this.constructor==Array?new Array(this.length):{},i.each(this,function(e,n){e&&e.__?t[n]=e.toJS():t[n]=e}),t},transact:function(){return this.__.notify("transact",this)},run:function(){return this.__.notify("run",this)},now:function(){return this.__.notify("now",this)},pivot:function(){return this.__.notify("pivot",this)}},o=i.extend({push:function(t){return this.append([t])},append:function(t){return t&&t.length?this.__.notify("splice",this,[this.length,0].concat(t)):this},pop:function(){return this.length?this.__.notify("splice",this,[this.length-1,1]):this},unshift:function(t){return this.prepend([t])},prepend:function(t){return t&&t.length?this.__.notify("splice",this,[0,0].concat(t)):this},shift:function(){return this.length?this.__.notify("splice",this,[0,1]):this},splice:function(t,e,n){return this.__.notify("splice",this,arguments)}},s),a=Object.create(Array.prototype,r(o)),u={Hash:Object.create(Object.prototype,r(i.extend({remove:function(t){var e=[],n=t;t.constructor!=Array&&(n=[t]);for(var i=0,r=n.length;r>i;i++)this.hasOwnProperty(n[i])&&e.push(n[i]);return e.length?this.__.notify("remove",this,e):this}},s))),List:a,arrayMethods:o};t.exports=u},function(t,e,n){"use strict";var i=n(4),r=n(6),s=n(5),o={freeze:function(t,e,n,s){if(t&&t.__)return t;var o,a,u=this;return o=t.constructor==Array?this.createArray(t.length):Object.create(r.Hash),i.addNE(o,{__:{listener:!1,parents:[],notify:e,dirty:!1,freezeFn:n,live:s||!1}}),i.each(t,function(t,i){a=t&&t.constructor,(a==Array||a==Object)&&(t=u.freeze(t,e,n,s)),t&&t.__&&u.addParent(t,o),o[i]=t}),n(o),o},update:function(t,e,n){return this[t]?this[t](e,n):i.error("Unknown update type: "+t)},reset:function(t,e){var n,r=this,s=t.__;return e&&e.__?(n=e,n.__.listener=e.__.listener,n.__.parents=[],this.fixChildren(n,t),i.each(n,function(e){e&&e.__&&(r.removeParent(t),r.addParent(e,n))})):n=this.freeze(t,s.notify,s.freezeFn,s.live),n},merge:function(t,e){var n=t.__,r=n.trans,e=i.extend({},e);if(r){for(var s in e)r[s]=e[s];return t}var o,a,u,p,d=this,c=this.copyMeta(t),l=n.notify;i.each(t,function(i,r){return p=i&&i.__,p&&d.removeParent(i,t),(o=e[r])?(a=o&&o.constructor,(a==Array||a==Object)&&(o=d.freeze(o,l,n.freezeFn,n.live)),o&&o.__&&d.addParent(o,c),delete e[r],void(c[r]=o)):(p&&d.addParent(i,c),c[r]=i)});for(u in e)o=e[u],a=o&&o.constructor,(a==Array||a==Object)&&(o=d.freeze(o,l,n.freezeFn,n.live)),o&&o.__&&d.addParent(o,c),c[u]=o;return n.freezeFn(c),this.refreshParents(t,c),c},replace:function(t,e){var n=this,i=e&&e.constructor,r=t.__,s=e;(i==Array||i==Object)&&(s=n.freeze(e,r.notify,r.freezeFn,r.live),s.__.parents=r.parents,r.listener&&(s.__.listener=r.listener),s.__.listener&&this.trigger(s,"update",s,r.live)),!r.parents.length&&r.listener&&r.listener.trigger("immediate",t,s);for(var o=r.parents.length-1;o>=0;o--)0==o?this.refresh(r.parents[o],t,s,!1):this.markDirty(r.parents[o],[t,s]);return s},remove:function(t,e){var n=t.__.trans;if(n){for(var r=e.length-1;r>=0;r--)delete n[e[r]];return t}var s,o=this,a=this.copyMeta(t);return i.each(t,function(n,i){s=n&&n.__,s&&o.removeParent(n,t),-1==e.indexOf(i)&&(s&&o.addParent(n,a),a[i]=n)}),t.__.freezeFn(a),this.refreshParents(t,a),a},splice:function(t,e){var n=t.__,r=n.trans;if(r)return r.splice.apply(r,e),t;var s,o,a=this,u=this.copyMeta(t),p=e[0],d=p+e[1];if(i.each(t,function(e,n){e&&e.__&&(a.removeParent(e,t),(p>n||n>=d)&&a.addParent(e,u)),u[n]=e}),e.length>1)for(var c=e.length-1;c>=2;c--)o=e[c],s=o&&o.constructor,(s==Array||s==Object)&&(o=this.freeze(o,n.notify,n.freezeFn,n.live)),o&&o.__&&this.addParent(o,u),e[c]=o;return Array.prototype.splice.apply(u,e),t.__.freezeFn(u),this.refreshParents(t,u),u},transact:function(t){var e,n=this,r=t.__.trans;return r?r:(e=t.constructor==Array?[]:{},i.each(t,function(t,n){e[n]=t}),t.__.trans=e,i.nextTick(function(){t.__.trans&&n.run(t)}),e)},run:function(t){var e=this,n=t.__.trans;if(!n)return t;i.each(n,function(n,i){n&&n.__&&e.removeParent(n,t)}),delete t.__.trans;var r=this.replace(t,n);return r},pivot:function(t){return t.__.pivot=1,this.unpivot(t),t},unpivot:function(t){i.nextTick(function(){t.__.pivot=0})},refresh:function(t,e,n,r){var s=this,o=t.__.trans,a=0;if(o)return i.each(o,function(i,r){a||i===e&&(o[r]=n,a=1,n&&n.__&&s.addParent(n,t))}),t;var u,p,d,c=this.copyMeta(t),l=t.__.dirty;return l&&(u=l[0],p=l[1]),i.each(t,function(i,r){i===e?i=n:i===u&&(i=p),i&&(d=i.__)&&(!d.trans&&d.dirty&&(i=s.refresh(i,d.dirty[0],d.dirty[1],!0)),s.removeParent(i,t),s.addParent(i,c)),c[r]=i}),t.__.freezeFn(c),t.__.dirty=!1,r?c:void this.refreshParents(t,c)},fixChildren:function(t,e){var n=this;i.each(t,function(i){if(i&&i.__){if(-1!=i.__.parents.indexOf(t))return n.fixChildren(i);if(1==i.__.parents.length)return i.__.parents=[t];e&&n.removeParent(i,e),n.addParent(i,t)}})},copyMeta:function(t){var e;e=t.constructor==Array?this.createArray(t.length):Object.create(r.Hash);var n=t.__;return i.addNE(e,{__:{notify:n.notify,listener:n.listener,parents:n.parents.slice(0),trans:n.trans,dirty:!1,freezeFn:n.freezeFn,pivot:n.pivot,live:n.live}}),n.pivot&&this.unpivot(e),e},refreshParents:function(t,e){var n,i=t.__;if(i.listener&&this.trigger(e,"update",e,i.live),i.parents.length)for(n=i.parents.length-1;n>=0;n--)0==n?this.refresh(i.parents[n],t,e,!1):this.markDirty(i.parents[n],[t,e]);else i.listener&&i.listener.trigger("immediate",t,e)},markDirty:function(t,e){var n,i=t.__;for(i.dirty=e,i.trans&&this.refresh(t,e[0],e[1]),n=i.parents.length-1;n>=0;n--)this.markDirty(i.parents[n],e)},removeParent:function(t,e){var n=t.__.parents,i=n.indexOf(e);-1!=i&&n.splice(i,1)},addParent:function(t,e){var n=t.__.parents,i=n.indexOf(e);-1==i&&(n[n.length]=e)},trigger:function(t,e,n,r){var s=t.__.listener,o=s.ticking;return r?void((o||n)&&(s.ticking=0,s.trigger(e,o||n))):(s.ticking=n,void(o||i.nextTick(function(){if(s.ticking){var t=s.ticking;s.ticking=0,s.trigger(e,t)}})))},createListener:function(t){var e=t.__.listener;return e||(e=Object.create(s,{_events:{value:{},writable:!0}}),t.__.listener=e),e},createArray:function(){return[].__proto__?function(t){var e=new Array(t);return e.__proto__=r.List,e}:function(t){var e=new Array(t),n=r.arrayMethods;for(var i in n)e[i]=n[i];return e}}()};t.exports=o},function(t,e){"use strict";function n(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=Object.assign||function(t,e){for(var i,r,s=n(t),o=1;o<arguments.length;o++){i=arguments[o],r=Object.keys(Object(i));for(var a=0;a<r.length;a++)s[r[a]]=i[r[a]]}return s}},function(t,e,n){"use strict";var i=n(1),r=n(10),s=n(8),o=i.createClass({components:{},typeCheckOrder:[],contextTypes:{typeDefaults:i.PropTypes.object},render:function(){var t=this.getComponent(),e=s({},this.context.typeDefaults[this.props.type],this.props.settings);return this.addDeepSettings(e),i.createElement(t,{value:this.props.value,binding:this.props.binding,settings:e,onUpdated:this.props.onUpdated,id:this.props.id,ref:"field"})},getComponent:function(){var t=this.props.type;return t||(t=this.guessType(this.props.value)),this.fieldType=t,this.components[t]},guessType:function(t){for(var e,n=!1,i=0,r=this.typeCheckOrder;!n&&i<r.length;)e=this.components[r[i]].prototype,e.isType&&e.isType(t)?n=r[i++]:i++;return n||"object"},getValidationErrors:function(t){return this.refs.field.getValidationErrors(t)},addDeepSettings:function(t){var e,n=this.props.parentSettings||{};for(var i in r)e=r[i](n[i],t[i]),"undefined"!=typeof e&&(t[i]=e)}});o.registerType=function(t,e,n){var i=o.prototype;i.components[t]=e,n&&i.typeCheckOrder.unshift(t)},t.exports=o},function(t,e){t.exports={editing:function(t,e){return"undefined"!=typeof e?e:"always"==t?"always":void 0},adder:function(t,e){return"undefined"!=typeof e?e:"undefined"!=typeof t?t:!0},fixedFields:function(t,e){return"undefined"!=typeof e?e:"boolean"==typeof t?t:void 0}}},function(t,e,n){"use strict";var i=n(1),r=n(12),s=n(8),o=n(14),a=i.createClass({mixins:[o],getInitialState:function(){return this.getStateFromProps(this.props)},getStateFromProps:function(t){return{editing:t.settings.editing||!1,fields:s({},t.settings&&t.settings.fields||{})}},defaultValue:{},componentWillReceiveProps:function(t){this.props.settings.fields!==t.settings.fields&&this.setState({fields:s({},t.settings&&t.settings.fields||{})})},render:function(){var t=this,e=this.props.settings,n=this.state.editing||e.header===!1?"open jsonObject jsonCompound":"jsonObject jsonCompound",r="",o=(this.state.fields,this.state.bindings,[]),a=(s({},this.props.value),this.getFixedFields()),u=this.getHiddenFields(),p=0;this.getFieldOrder().forEach(function(e){e.constructor===Array?o.push(t.renderGroup(e,a,++p)):u[e]||o.push(t.renderField(e,a))});var d=[o];return e.adder!==!1&&d.push(this.renderAdder()),r=i.DOM.div({key:"o",className:"jsonChildren"},d),i.DOM.span({className:n},[this.renderHeader(),r])},renderField:function(t,e){var n=this.props.value[t],s=this.state.fields[t]||{},o=this.props.binding&&this.props.binding[t],a=e===!0||"object"==typeof e&&e[t];return s.settings||(s.settings={}),i.createElement(r,{value:n,key:t,name:t,ref:t,fixed:a,id:this.props.id,definition:s,binding:o,onBindingUpdated:this.updateBinding,onUpdated:this.updateField,onDeleted:this.deleteField,parentSettings:this.props.settings})},renderGroup:function(t,e,n){var r=this,s=[];return t.forEach(function(t){s.push(r.renderField(t,e))}),i.DOM.div({className:"jsonGroup jsonGroup_"+n},s)},getDefaultHeader:function(){return"Map ["+Object.keys(this.props.value).length+"]"},getDefaultAdder:function(){return"+ Add field"},updateField:function(t,e){this.checkEditingSetting(t),this.props.value.set(t,e)},updateBinding:function(t,e){this.props.binding.set(t,e)},deleteField:function(t){this.props.value.remove(t)},getValidationErrors:function(t){var e=this,n=[],i=Object.keys(this.refs);return i.forEach(function(t){var i=e.refs[t].getValidationErrors();i&&(n=n.concat(i))}),n},getFieldOrder:function(){var t,e=this,n=this.props.settings.order,i=typeof n,r=this.props.settings.fields||{};if(!n||"function"!=i&&n.constructor!==Array)return Object.keys(this.props.value);var o=s({},this.props.value),a=[];if("function"==i)return n(o);n.constructor===Array&&n.forEach(function(n){n.constructor==Array?(t=[],n.forEach(function(n){e.addFieldToOrder(n,o,r)&&(t.push(n),delete o[n])}),t.length&&a.push(t)):e.addFieldToOrder(n,o,r)&&(a.push(n),delete o[n])});for(var u in o)-1==a.indexOf(u)&&a.push(u);return a},addFieldToOrder:function(t,e,n){return"undefined"!=typeof e[t]||n[t]&&"react"==n[t].type},getHiddenFields:function(){var t=this.props.settings.hiddenFields,e={};return t?(t.forEach(function(t){e[t]=1}),e):e}});t.exports=a},function(t,e,n){"use strict";var i=n(1),r=n(8),s=n(13),o=n(9),a=function(t){for(var e in t)if("object"!=typeof t[e]||null===t[e]||t[e]instanceof Array||t[e]instanceof String||t[e]instanceof Number)switch(typeof t[e]){case"undefined":case"boolean":case"string":case"number":t[e]=void 0;break;default:t[e]=[]}else a(t[e]);return t},u=i.createClass({getInitialState:function(){return{error:!1}},getDefaultProps:function(){return{definition:{}}},render:function(){var t,e=this.props.definition||{},n=this.props.binding,r="jsonField",s=e.type||o.prototype.guessType(this.props.value),a=this.props.id+"_"+this.props.name,u="";if("react"==s)return this.renderReactField(e);t=this.useBinding()&&void 0!==n?[this.renderBindingField(a)]:[this.renderTypeField(s,a)],r+=" "+s+"Field",this.state.error&&(r+=" jsonError",this.state.error!==!0&&(u=i.DOM.span({key:"e",className:"jsonErrorMsg"},this.state.error)));var p=[i.DOM.label({key:"s1",htmlFor:a},(e.title||this.props.name)+":")];return this.props.fixed?p.unshift(i.DOM.span({key:"f",className:"jsonFixed"})):p.unshift(i.DOM.a({key:"a",href:"#",className:"jsonRemove",onClick:this.handleRemove},"x")),this.useBinding()&&void 0===n&&t.unshift(i.DOM.a({key:"b",className:"jsonBind",onClick:this.handleAddBinding},"=")),void 0!==this.props.value||this.useBinding()&&void 0!==n?t.unshift(i.DOM.a({key:"r",className:"jsonReset",onClick:this.handleReset},"x")):t.unshift(i.DOM.span({key:"f",className:"jsonFixed"})),i.DOM.div({className:r},[i.DOM.span({className:"jsonName",key:"n"},p),i.DOM.span({className:"jsonValue",key:"v"},t),u])},useBinding:function(){return this.props.parentSettings&&this.props.parentSettings.useBinding},renderTypeField:function(t,e){var n,s=this.props.definition,a=r({},s.settings||{});return s.fields&&(a.fields=s.fields),n=i.createElement(o,{type:t,value:this.props.value,binding:this.props.binding,settings:a,onUpdated:this.onUpdated,ref:"typeField",id:e,parentSettings:this.props.parentSettings})},renderBindingField:function(t){return i.createElement(o,{type:"object",value:this.props.binding,settings:{fields:{path:{type:"string"},mode:{type:"select",settings:{editing:!1,options:["OneWay","TwoWay","OneTime"].map(function(t,e){return{value:t,label:t}})}},converter:{type:"codeEditor"},converterArgs:{type:"string"}}},onUpdated:this.onBindingUpdated,ref:"typeField",id:t,parentSettings:this.props.parentSettings})},renderReactField:function(t){return i.DOM.div({className:"jsonField reactField"},t.output)},handleRemove:function(t){this.props.onDeleted(this.props.name)},handleReset:function(t){var e=this.props.definition||{},n=e.type||o.prototype.guessType(this.props.value);"object"===n?this.onUpdated(a(this.props.value.toJS())):this.onUpdated(void 0)},handleAddBinding:function(t){var e={path:void 0,converter:void 0,converterArgs:void 0,mode:"OneWay"};this.onBindingUpdated(e)},shouldComponentUpdate:function(t,e){return t.value!=this.props.value||t.binding!=this.props.binding||e.error!=this.state.error},onUpdated:function(t){if(this.useBinding()&&void 0!==this.props.binding)return void this.onBindingUpdated(t);var e=this.props.definition;this.props.value!==t&&(this.props.onUpdated(this.props.name,t),e.onChange&&e.onChange(t,this.props.value))},onBindingUpdated:function(t){this.props.onBindingUpdated(this.props.name,t)},getValidationErrors:function(t){var e=[],n=this.props.definition.validates,i=this.props.name,r=this.refs.typeField;if(!r)return[];if("object"==r.fieldType&&(e=r.getValidationErrors(t),e.forEach(function(t){t.path?t.path=i+"."+t.path:t.path=i}),e.length&&this.setState({error:!0})),!n)return e;var o,a=s.getValidationError(this.props.value,t,n);return a?(o=this.props.definition.errorMessage,o||(o=(this.props.definition.label||this.props.name)+" value is not valid."),a.path=i,a.message=o,this.setState({error:o}),e=e.concat([a])):this.state.error&&this.setState({error:!1}),e}});t.exports=u},function(t,e){"use strict";function n(t,e){return t.length?n(t.slice(1),e[t[0]]):e}var i={required:function(t){return t&&("string"!=typeof t||t.trim())?!0:!1},email:function(t){if(!t)return!0;var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)},length:function(t,e,n,i){return n||(n=0),i||(i=1/0),t.length>=n&&t.length<=i},integer:function(t,e,n,i){if(n||0===n||(n=-(1/0)),i||(i=1/0),!t&&0!=t)return!0;var r=parseInt(t);return t!=r?!1:i>=r&&r>=n},checked:function(t){return t},matches:function(t,e,i){return t==n(i.split("."),e)}};t.exports={getValidationError:function(t,e,n){var o=[],a=!1,u=0;"string"==typeof n?o=r(n):"function"==typeof n?o=[n]:n&&n.constructor===Array&&(o=n);for(var p,d,c;!a&&u<o.length;)c=o[u++],"string"==typeof c?(p=s(c),d=i[p.name],d?d.apply(null,[t,e].concat(p.args))||(a={value:t,method:c}):console.log("Unkown validation method "+p.name)):"function"==typeof c&&(c(t,e)||(a={value:t,method:"custom"}));return a}};var r=function(t){return t.match(/[^\s\[]+(\[[^\]]+?\])?/gi)},s=function(t){var e,n=t.split("["),i={name:n[0],args:[]};return n.length>1&&(e=n[1],"]"==e[e.length-1]&&(e=e.slice(0,e.length-1)),i.args=e.split(/\s*,\s*/)),i}},function(t,e,n){"use strict";var i=n(1),r=n(15),s=n(8);t.exports={renderHeader:function(){var t=this.props.settings.header;if(t===!1)return"";var e,n=typeof t;return e="function"==n?t(this.props.value.toJS()):"undefined"==n?this.getDefaultHeader():t,i.DOM.span({key:"s",onClick:this.toggleEditing,className:"compoundToggle"},e)},toggleEditing:function(){"always"!=this.state.editing&&this.props.settings.header!==!1&&this.setState({editing:!this.state.editing})},componentWillReceiveProps:function(t){this.props.settings.editing!=t.settings.editing&&this.setState({editing:t.editing})},renderAdder:function(t){var e,n=this.props.settings.adder,s=typeof n;return e="function"==s?n(this.props.value.toJS()):n===!0||"undefined"==s?this.getDefaultAdder():n,i.createElement(r,{onCreate:this.createField,name:t,key:"add",text:e})},createField:function(t,e,n){if(this.props.value[t])return console.log("Field "+t+" already exists.");n.settings={editing:"always"==this.state.editing?"always":!0,focus:!0};var i=s({},this.state.fields);i[t]=n,this.setState({fields:i}),this.props.value.set(t,e)},checkEditingSetting:function(t){var e=this.state.fields;e[t]&&e[t].settings&&e[t].settings.focus===!0&&(e=s({},e),e[t].settings.focus=!1,this.setState({fields:e}))},getFixedFields:function(){var t=this.props.settings.fixedFields,e={};return t&&t.constructor==Array?(t.forEach(function(t){e[t]=1}),e):t}}},function(t,e,n){var i=n(1),r=n(9),s=i.createClass({getInitialState:function(){return{creating:this.props.creating||!1,name:this.props.name,type:"string"}},render:function(){if(!this.state.creating)return i.DOM.a({className:"jsonAdd",href:"#",onClick:this.handleCreate},this.props.text);var t,e=this.getTypes().map(function(t){return i.DOM.option({value:t,key:t},t[0].toUpperCase()+t.slice(1))});return t="undefined"!=typeof this.props.name?[i.DOM.span({className:"jsonName"},this.props.name),i.DOM.span(null,":")]:[i.DOM.input({ref:"keyInput",type:"text",value:this.state.value,onChange:this.changeKey}),i.DOM.span(null,":")],i.DOM.div({className:"jsonField jsonFieldAdder"},[t,i.DOM.select({key:"s",value:this.state.type,onChange:this.changeType,ref:"typeSelector"},e),i.DOM.button({key:"b",onClick:this.createField},"OK"),i.DOM.a({key:"a",href:"#",className:"cancelField",onClick:this.handleCancel},"Cancel")])},componentDidUpdate:function(t,e){!e.creating&&this.state.creating&&(this.refs.keyInput?this.refs.keyInput.getDOMNode().focus():this.refs.typeSelector.getDOMNode().focus())},componentWillReceiveProps:function(t){this.setState({name:t.name})},handleCreate:function(t){t.preventDefault(),this.setState({creating:!0})},handleCancel:function(t){t.preventDefault(),this.setState({creating:!1})},changeType:function(t){this.setState({type:t.target.value})},changeKey:function(t){this.setState({name:t.target.value})},createField:function(){this.setState({creating:!1});var t=r.prototype.components[this.state.type].prototype.defaultValue;this.props.onCreate(this.state.name,t,{type:this.state.type})},getTypes:function(){return Object.keys(r.prototype.components)}});t.exports=s},function(t,e,n){"use strict";var i=n(1),r=n(12),s=(n(8),n(14)),o=i.createClass({mixins:[s],getInitialState:function(){return this.getStateFromProps(this.props)},getStateFromProps:function(t){return{editing:t.settings.editing||!1,fields:this.state&&this.state.fields||{}}},defaultValue:[],render:function(){for(var t,e,n=this.props.settings,s=this.state.editing?"open jsonArray jsonCompound":"jsonArray jsonCompound",o="",a=this.getFixedFields(),u=this.state.fields,p=[],d=0;d<this.props.value.length;d++)t=u[d]||{},t.settings||(t.settings={}),e=a===!0||"object"==typeof a&&a[d],p.push(i.createElement(r,{value:this.props.value[d],key:d,name:d,id:this.props.id,definition:t,fixed:e,onUpdated:this.updateField,onDeleted:this.deleteField,parentSettings:this.props.settings}));var c=[p];return n.adder!==!1&&c.push(this.renderAdder(this.props.value.length)),o=i.DOM.div({key:"o",className:"jsonChildren"},c),i.DOM.span({className:s},[this.renderHeader(),o])},getDefaultHeader:function(){return"List ["+this.props.value.length+"]"},getDefaultAdder:function(){return"+ Add element"},updateField:function(t,e){this.checkEditingSetting(t),this.props.value.set(t,e)},deleteField:function(t){var e={};for(var n in this.state.fields)n>t?e[n-1]=this.state.fields[n]:t>n&&(e[n]=this.state.fields[n]);this.props.value.splice(t,1),this.setState({fields:e})},isType:function(t){return t&&t.constructor==Array}});t.exports=o},function(t,e,n){var i=n(1),r=n(18),s=i.createClass({mixins:[r],typeClass:"jsonString",inputType:"text",defaultValue:"",getInitialState:function(){return this.getStateFromProps(this.props)},render:function(){return this.renderInput()},updateValue:function(t){this.setState({value:t.target.value})},isType:function(t){return"object"!=typeof t}});t.exports=s},function(t,e,n){"use strict";var i=n(1);t.exports={getStateFromProps:function(t){return{editing:t.settings.editing||!1,value:t.value}},renderInput:function(){var t=this.typeClass;return this.state.editing?i.DOM.input({type:this.inputType,value:this.state.value,id:this.props.id,placeholder:this.props.settings.placeholder||"",onChange:this.updateValue,onBlur:this.setValue,ref:"input",onKeyDown:this.handleKeyDown}):i.DOM.span({onClick:this.setEditMode,className:t},this.getDisplayString())},getDisplayString:function(){return this.getDisplayModeString?this.getDisplayModeString():this.isEmpty()?i.DOM.span({className:"jsonNovalue"},"No value"):this.props.value},componentWillReceiveProps:function(t){var e={},n=!1;this.props.value!=t.value&&(n=!0,e.value=t.value),this.props.settings.editing!=t.settings.editing&&(n=!0,e.editing=t.editing),n&&this.setState(e)},componentDidUpdate:function(t,e){(this.state.editing&&!e.editing||this.props.settings.focus)&&this.focus()},componentDidMount:function(){(this.state.editing===!0||this.props.settings.focus)&&this.focus()},setEditMode:function(){this.setState({editing:!0})},setValue:function(){"always"!=this.state.editing&&this.setState({editing:!1}),this.props.onUpdated(this.state.value)},toggleEditing:function(){this.setState({editing:!this.state.editing})},handleKeyDown:function(t){13==t.which&&this.setValue()},focus:function(){var t=this.refs.input.getDOMNode();t.focus(),t.value=t.value},isEmpty:function(){return void 0===this.props.value||""===this.props.value}}},function(t,e,n){var i=n(1),r=i.createClass({defaultValue:!1,render:function(){var t="jsonBoolean";return i.DOM.input({type:"checkbox",className:t,id:this.props.id,checked:this.props.value,onChange:this.updateValue})},updateValue:function(t){this.props.onUpdated(t.target.checked)},isType:function(t){return"boolean"==typeof t},componentWillReceiveProps:function(t){this.props.value!=t.value&&this.setState({value:t.value})}});t.exports=r},function(t,e,n){var i=n(1),r=n(18),s=i.createClass({mixins:[r],typeClass:"jsonNumber",inputType:"number",defaultValue:"",getInitialState:function(){return this.getStateFromProps(this.props)},render:function(){return this.renderInput()},updateValue:function(t){this.setState({value:parseFloat(t.target.value)})},isType:function(t){return"number"==typeof t}});t.exports=s},function(t,e,n){var i=n(1),r=n(18),s=i.createClass({mixins:[r],defaultValue:"",getInitialState:function(){return this.getStateFromProps(this.props)},render:function(){var t="jsonText";return this.state.editing?i.DOM.textarea({value:this.state.value,id:this.props.id,onChange:this.updateValue,placeholder:this.props.settings.placeholder||"",onBlur:this.setValue,ref:"input"}):i.DOM.span({onClick:this.setEditMode,className:t},this.props.value)},updateValue:function(t){this.setState({value:t.target.value})},isType:function(t){return"string"==typeof t&&t.length>100}});t.exports=s},function(t,e,n){var i=n(1),r=n(18),s=i.createClass({mixins:[r],typeClass:"jsonPassword",inputType:"password",defaultValue:"",getInitialState:function(){return this.getStateFromProps(this.props)},render:function(){return this.renderInput()},getDisplayModeString:function(){return this.getWildcards()},getWildcards:function(){for(var t="",e=this.state.value.length-1;e>=0;e--)t+="*";return t},isType:function(){return!1},updateValue:function(t){this.setState({value:t.target.value})}});t.exports=s},function(t,e,n){var i=n(1),r=i.createClass({defaultValue:"",getInitialState:function(){return{value:this.props.value}},render:function(){var t="jsonSelect";return i.DOM.select({className:t,id:this.props.id,value:this.props.value,onChange:this.updateValue},this.renderOptions())},renderOptions:function(){var t=this.props.settings.options,e=[];return t&&t.length?(t.forEach(function(t){var n=t;"object"!=typeof t&&(n={value:t,label:t}),e.push(i.DOM.option({value:n.value},n.label))}),e):e},updateValue:function(t){this.props.onUpdated(t.target.value)},componentWillReceiveProps:function(t){this.props.value!=t.value&&this.setState({value:t.value})}});t.exports=r}])});