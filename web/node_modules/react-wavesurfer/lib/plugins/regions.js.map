{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 72512569234ef2b6cf14","webpack:///external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack:///external \"prop-types\"","webpack:///./src/plugins/regions.js"],"names":["REGIONS_EVENTS","REGION_EVENTS","capitaliseFirstLetter","string","split","map","part","charAt","toUpperCase","slice","join","Regions","props","state","isReady","_init","call","wavesurfer","on","bind","nextProps","oldRegions","Object","create","regions","list","newRegionId","oldRegionId","hasOwnProperty","newRegion","_hookUpRegionEvents","addRegion","start","end","update","remove","forEach","un","e","propCallback","originalArgs","region","propTypes","bool","object","defaultProps"],"mappings":"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","file":"plugins/regions.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"prop-types\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"prop-types\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"plugins/regions\"] = factory(require(\"react\"), require(\"prop-types\"));\n\telse\n\t\troot[\"Wavesurfer\"] = root[\"Wavesurfer\"] || {}, root[\"Wavesurfer\"][\"plugins/regions\"] = factory(root[\"React\"], root[\"prop-types\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 72512569234ef2b6cf14","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}\n// module id = 0\n// module chunks = 0 1 2","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"prop-types\"\n// module id = 1\n// module chunks = 0 1 2","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst REGIONS_EVENTS = [\n  'region-in',\n  'region-out',\n  'region-mouseenter',\n  'region-mouseleave',\n  'region-click',\n  'region-dblclick',\n  'region-updated',\n  'region-update-end',\n  'region-removed',\n  'region-play'\n];\n\nconst REGION_EVENTS = [\n  'in',\n  'out',\n  'remove',\n  'update',\n  'click',\n  'dbclick',\n  'over',\n  'leave'\n];\n\n/**\n * @description Capitalise the first letter of a string\n */\nfunction capitaliseFirstLetter(string) {\n  return string\n    .split('-')\n    .map(part => part.charAt(0).toUpperCase() + part.slice(1))\n    .join('');\n}\n\nclass Regions extends Component {\n  constructor(props) {\n    super(props);\n\n    // this is so that jscs does not force us to go functional\n    this.state = {};\n  }\n\n  componentDidMount() {\n    if (this.props.isReady) {\n      this._init.call(this);\n    }\n\n    this.props.wavesurfer.on('ready', this._init.bind(this));\n  }\n\n  componentWillReceiveProps(nextProps) {\n    // only update if the wavesurfer instance has been ready\n    if (!this.props.isReady) {\n      return;\n    }\n\n    // cache reference to old regions\n    const oldRegions = Object.create(this.props.wavesurfer.regions.list);\n    let newRegionId;\n    let oldRegionId;\n\n    for (newRegionId in nextProps.regions) {\n      if ({}.hasOwnProperty.call(nextProps.regions, newRegionId)) {\n        const newRegion = nextProps.regions[newRegionId];\n\n        // remove from oldRegions\n        delete oldRegions[newRegionId];\n\n        // new regions\n        if (!this.props.wavesurfer.regions.list[newRegionId]) {\n          this._hookUpRegionEvents(nextProps.wavesurfer.addRegion(newRegion));\n\n          // update regions\n        } else if (\n          oldRegions[newRegionId] &&\n          (oldRegions[newRegionId].start !== newRegion.start ||\n            oldRegions[newRegionId].end !== newRegion.end)\n        ) {\n          nextProps.wavesurfer.regions.list[newRegionId].update({\n            start: newRegion.start,\n            end: newRegion.end\n          });\n        }\n      }\n    }\n\n    // remove any old regions\n    for (oldRegionId in oldRegions) {\n      if ({}.hasOwnProperty.call(oldRegions, oldRegionId)) {\n        nextProps.wavesurfer.regions.list[oldRegionId].remove();\n      }\n    }\n  }\n\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  componentWillUnmount() {\n    REGION_EVENTS.forEach(e => {\n      this.props.wavesurfer.un(e);\n    });\n  }\n\n  _init() {\n    const { wavesurfer, regions } = this.props;\n    let newRegionId;\n\n    REGIONS_EVENTS.forEach(e => {\n      const propCallback = this.props[`on${capitaliseFirstLetter(e)}`];\n      if (!propCallback) return;\n\n      wavesurfer.on(e, (...originalArgs) => {\n        propCallback({\n          wavesurfer,\n          originalArgs\n        });\n      });\n    });\n\n    // add regions and hook up callbacks to region objects\n    for (newRegionId in regions) {\n      if ({}.hasOwnProperty.call(regions, newRegionId)) {\n        this._hookUpRegionEvents(wavesurfer.addRegion(regions[newRegionId]));\n      }\n    }\n  }\n\n  _hookUpRegionEvents(region) {\n    REGION_EVENTS.forEach(e => {\n      const propCallback = this.props[\n        `onSingleRegion${capitaliseFirstLetter(e)}`\n      ];\n      const { wavesurfer } = this.props;\n      if (propCallback) {\n        region.on(e, (...originalArgs) => {\n          propCallback({\n            wavesurfer,\n            originalArgs,\n            region\n          });\n        });\n      }\n    });\n\n    region.on('remove', () => {\n      REGION_EVENTS.forEach(e => {\n        region.un(e);\n      });\n    });\n  }\n\n  render() {\n    return false;\n  }\n}\n\nRegions.propTypes = {\n  isReady: PropTypes.bool,\n  regions: PropTypes.object,\n  wavesurfer: PropTypes.object\n};\n\nRegions.defaultProps = {\n  regions: []\n};\n\nexport default Regions;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/regions.js"],"sourceRoot":""}